$.mobile.page.prototype.options.addBackBtn = true;
$.mobile.page.prototype.options.backBtnText = "戻る";

$.jqplot.config.enablePlugins = true;
clickHandler = function(ev, gridpos, datapos, neighbor, plot) {
  if(neighbor!=null){
    x = neighbor.data[0];
    y = neighbor.data[1];
    index = neighbor.pointIndex;
    series = neighbor.seriesIndex
    alert(index+"("+new Date(x)+","+y+")");
  }
}; 
$.jqplot.eventListenerHooks.push(['jqplotClick', clickHandler]);

data  = [
  [["11/01/2011",17.7],["11/02/2011",17.2],["11/03/2011",18.4],["11/04/2011",18.4],["11/05/2011",18.9],["11/06/2011",18.1],["11/07/2011",18.6],["11/08/2011",15.7],["11/09/2011",14.3],["11/10/2011",14.1],["11/11/2011",12.4],["11/12/2011",16.4],["11/13/2011",17.8],["11/14/2011",16.9],["11/15/2011",14],["11/16/2011",12.6],["11/17/2011",14.5],["11/18/2011",12.6],["11/19/2011",16.3],["11/20/2011",17.4],["11/21/2011",12.6],["11/22/2011",11.1],["11/23/2011",12.4],["11/24/2011",13.3],["11/25/2011",11.4],["11/26/2011",10.9],["11/27/2011",11],["11/28/2011",12.1],["11/29/2011",14.4],["11/30/2011",14.6]],
  [["11/01/2011",14.3],["11/02/2011",12.9],["11/03/2011",15.6],["11/04/2011",14.8],["11/05/2011",15.2],["11/06/2011",17.2],["11/07/2011",15.9],["11/08/2011",13.9],["11/09/2011",11.7],["11/10/2011",11.9],["11/11/2011",11.2],["11/12/2011",12.9],["11/13/2011",13.6],["11/14/2011",13.2],["11/15/2011",11.8],["11/16/2011",9.7],["11/17/2011",9.5],["11/18/2011",10.5],["11/19/2011",12.1],["11/20/2011",13.5],["11/21/2011",9.3],["11/22/2011",7.2],["11/23/2011",8.6],["11/24/2011",9.5],["11/25/2011",8.1],["11/26/2011",7.4],["11/27/2011",7.2],["11/28/2011",8.8],["11/29/2011",11.7],["11/30/2011",11.2]],
  [["11/01/2011",21.4],["11/02/2011",21],["11/03/2011",21.3],["11/04/2011",22],["11/05/2011",22.2],["11/06/2011",19.5],["11/07/2011",22.7],["11/08/2011",17.8],["11/09/2011",16.6],["11/10/2011",16.2],["11/11/2011",14.4],["11/12/2011",20.4],["11/13/2011",21.7],["11/14/2011",20.7],["11/15/2011",16.4],["11/16/2011",15.8],["11/17/2011",19.7],["11/18/2011",14.3],["11/19/2011",22],["11/20/2011",22.1],["11/21/2011",16.5],["11/22/2011",14.7],["11/23/2011",15.6],["11/24/2011",18.6],["11/25/2011",15.7],["11/26/2011",13.7],["11/27/2011",14.9],["11/28/2011",14.7],["11/29/2011",17.7],["11/30/2011",19.4]]

];


$(document).on("pageshow","#p-line",function(e){
opts = {
  title: '2011年11月の気温',

  series: [	
    {
      label:'平均',
      showMarker:true,
      color:"#FFFF80",
    },
    {
      label:'最低',
      showMarker:false,
      color:"#AAAAFF",
    },
    {
      label:'最高',
      showMarker:false,
      color:"#FFCC88",
    },
  ],

  legend: {
    show:true,
    location:'ne',
  },

  axes: {

    xaxis: {
      renderer:$.jqplot.DateAxisRenderer,
      tickRenderer: $.jqplot.CanvasAxisTickRenderer,
      tickOptions:{
        formatString:"'%Y/%#m/%#d",
        angle:-60}
    },
    yaxis: {
      tickRenderer: $.jqplot.CanvasAxisTickRenderer,
      tickOptions:{prefix: '℃'}
    }
  },

  fillBetween: {
    series1: 1,
    series2: 2,
    color: "rgba(227, 167, 111, 0.2)",
    baseSeries: 0,
    fill: true
  },
  highlighter: {
    show: true,
    sizeAdjust: 7.5
  },
  cursor:{zoom:true},
};

  lineplot = $.jqplot('linechart', data, opts);

  $(window).on('orientationchange',function(ui,e){
    lineplot.replot();
  })
})

